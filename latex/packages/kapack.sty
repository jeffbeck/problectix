%%
%% This is file `kapack.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% kapack.dtx  (with options: `package')
%% 
%% IMPORTANT NOTICE:
%% 
%% For the copyright see the source file.
%% 
%% Any modified versions of this file must be renamed
%% with new filenames distinct from kapack.sty.
%% 
%% For distribution of the original source see the terms
%% for copying and modification in the file kapack.dtx.
%% 
%% This generated file may be distributed as long as the
%% original source files, as listed above, are part of the
%% same distribution. (The sources need not necessarily be
%% in the same archive or directory.)
\definecolor{rot}{rgb}{1,0,0}          \definecolor{lila}{rgb}{0.6,0.1,0.7}
\definecolor{rosa}{rgb}{0.9,0,0.4}     \definecolor{gruen}{rgb}{0,0.5,0}
\definecolor{blau}{rgb}{0.2,0,1}       \definecolor{hellgrau}{gray}{0.55}
\definecolor{dunkelgrau}{gray}{0.35}
\newcounter{lockerer}                 %^^A Switch fuer Zusatzabstaende %%%%%%
\newlength{\lockererwert}
\setlength{\lockererwert}{0mm}        %^^A Laenge der Zusatzabstaende
\setcounter{lockerer}{1}              %^^A Fixzwischenraeume
                                      %^^A ein=(1), aus=(0)

\newcounter{linierung}

\newcounter{teilaufnummerierung}

\newcounter{aufgabennummerierung}

\newcounter{loesungslinienzeigen}

\newcounter{teilaufgabennummer}

\newcounter{teilaufgabennummerreal}

\newcounter{textblocknummerreal}

\newcounter{teilaufgabenloesung}

\newcounter{ersteloesunginaufgabe}

\newcounter{ohneeins}
\newcounter{ohnezwei}
\newcounter{ohnedrei}

\newlength{\aufgabenumbruchbreite}
\setlength{\aufgabenumbruchbreite}{163mm}

\newlength{\aufgabenbreite}

\newlength{\aufgabentitelbreite}

\setlength{\aufgabenbreite}{\aufgabenumbruchbreite}
\addtolength{\aufgabenbreite}{8.5mm}
\setlength{\aufgabentitelbreite}{\aufgabenumbruchbreite}
\addtolength{\aufgabentitelbreite}{13.5mm}%^^A war Sonderzeichen15.5mm

\newlength{\fussbalkenabstand}

\newlength{\baselineskiptmp}
\newlength{\voraufgabe}
\setlength{\bigskipamount}{14pt plus60pt minus10pt}%^^A Vor Aufgabe
\setlength{\medskipamount}{0pt plus9pt minus3pt}%^^A Vor Teil-Aufgabe

\newcounter{fachnummer}%^^A T=1, AP=2, M=3
\newcounter{ovrpunktet}               %^^A Punkte in Technologie
\newcounter{ovrpunktem}               %^^A Punkte in Mathe
\newcounter{ovrpunkteap}
\newcounter{punktet}               %^^A Gesamt-Punkte in Technologie
\newcounter{punkteap}              %^^A Gesamt-Punkte in Arbeitsplanung
\newcounter{punktem}               %^^A Gesamt-Punkte in Mathe
\newcounter{punktetauf}
\newcounter{aufgabennummer}
\newcounter{endeerreicht}
\setcounter{aufgabennummer}{1}
\newsavebox{\dateiname}
\newsavebox{\fachka}
\newsavebox{\aufgabentitel}        %^^A Name der Aufgabe, nach : angehaengt
\newsavebox{\aufgabenmarke}        %^^A Das, was vor der Aufgabennummer steht
\newsavebox{\punktetaufpzk}        %^^A Punktezahl, die am pzk erscheint

\newcommand{\aufgabenmarkesetzen}{%
   \ifthenelse{\value{aufgabennummerierung}=0}{%
      \sbox{\aufgabenmarke}{\bf Aufgabe} %^^A Standardmarke
   }{% sonst Fachbezogene Standardmarke
      %%% ??? Noch anpassen
      \sbox{\aufgabenmarke}{\bf T} %^^A Standardmarke dazu
    }
}

\newcommand{\keinprojekt}{%^^A *Projekt* durchgestrichen
Projekt\hspace{-8ex}\rule[0.6ex]{8.5ex}{0.25mm}}

\newcommand{\fusszeilenstuetze}{\rule[-0.43ex]{0mm}{2.2ex}}

\newcommand{\abcbox}[1]{\framebox[8mm]{\fusszeilenstuetze #1}}

\newcommand{\projektbox}[1]{\framebox[20mm]{\fusszeilenstuetze #1}}

\newcommand{\korrektur}[1]{\vspace{#1}}

\newcommand{\pzk}{%^^A
\hfill%^^A
\pzkbild%^^A
\linebreak
}

\newcommand{\teilaufgabennummererzeugen}[1][]{%
\ifthenelse{\value{vortext}=1}%^^A =keine Teilaufgaben
{% Beginn keine Teilaufgaben:
\textbf{\theaufgabennummer)}
}% Ende keine Teilaufgaben:
{% Beginn bei Teilaufgaben:
\ifthenelse{\value{teilaufnummerierung}=0}%
      {{\textbf{\theaufgabennummer\,\alph{teilaufgabennummer}) }}}%^^A 1a,1b ...
      {{\textbf{\theaufgabennummer.\arabic{teilaufgabennummer}) }}}%1.1, 1.2 ...
}% Ende bei Teilaufgaben
}

\newcommand{\keineloesung}[1][]{%
\ifthenelse{\value{teilaufgabenloesung}=0 \and \value{loesungen}=1}%% Bedingung
   {%^^A
   \teilaufgabennummererzeugen \textcolor{gruen}{-- Keine L^^f6sung angegeben --}%
   }%^^A True
   {}%^^A False
}%^^A Ende Definition


\newcounter{loesungslinienanzahl}

\newcounter{vortext}

\newlength{\anheben}

\newcounter{kaauf} %^^A Nummerirungsz^^e4hler  f^^fcr die neue Umgebung "kaauf"
\newenvironment{kaauf}[1][0]
    {%^^A Ablauf bei Beginn der Umgebung
    \begin{list}
    { %^^A Beginn Def. der Standardmarke
   \ifthenelse{\value{teilaufnummerierung}=0}%
      {{\alph{kaauf})}}%
      {{\bfseries \theaufgabennummer.\arabic{kaauf}}}
    } %^^A Ende Def. der Standardmarke
    { %^^A Beginn der Listenerkl\"{a}rung
    \usecounter{kaauf}
    \setlength{\leftmargin}{3ex}%^^A leicht einger^^fcckt
    \addtolength{\leftmargin}{#1mm}%
    \setlength{\labelsep}{0.2ex}%^^A Abstand Text -- Marke => evtl. ^^e4ndern
    \setlength{\labelwidth}{3.6ex}%^^A Gro^^dfz^^fcgig gew^^e4hlt, so lassen
    \setlength{\itemindent}{0mm}%^^A kein Einr^^fccken in der ersten Zeile
    \setlength{\parskip}{0mm}%
    \ifthenelse{\value{lockerer}=0}{\setlength{\topsep}{0pt}}{
    \setlength{\topsep}{\lockererwert}}%
    \setlength{\parsep}{0mm}%
    \setlength{\partopsep}{0mm}%
    \ifthenelse{\value{lockerer}=0}{\setlength{\itemsep}{0pt}}{
    \setlength{\itemsep}{\lockererwert}}%
    } %^^A Ende der Listenerkl^^e4rung
    %%\rm  %^^A Schriftart f^^fcr den Listentext
    } %^^A Ende Ablauf bei Beginn der Umgebung
    {\end{list}} %^^A kaauf-umgebung verlassen %% Ablauf bei Ende der Umgebung

\newenvironment{text}%
{% Beginn \begin
\addtocounter{textblocknummerreal}{1}%
\ifthenelse{\value{aufgabenstellung}=0 \or%
            \value{textblocknummerreal}=-\value{ohneeins} \or%^^A -=negativer Wert
            \value{textblocknummerreal}=-\value{ohnezwei} \or%^^A -=negativer Wert
            \value{textblocknummerreal}=-\value{ohnedrei}%^^A -=negativer Wert
           }%
           {\comment}%
           {\begin{minipage}[t]{\aufgabenumbruchbreite}}%
}% Ende \begin
{% Beginn \end
\ifthenelse{\value{aufgabenstellung}=0 \or%
            \value{textblocknummerreal}=-\value{ohneeins} \or% -=negativer Wert
            \value{textblocknummerreal}=-\value{ohnezwei} \or% -=negativer Wert
            \value{textblocknummerreal}=-\value{ohnedrei}% -=negativer Wert
           }
           {\endcomment}%
           {\end{minipage}}%
\vspace{1mm}% Zusatzabstand nach Textvorspann
\medskip
}% Ende \end

\newenvironment{teilaufgabe}[4][nix]%
{%^^A BEGINN bei \begin ausgef^^fchrt: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{linierung}{0}% Linien
\addtocounter{teilaufgabennummerreal}{1}%
\ifthenelse{\value{ohneeins}=\value{teilaufgabennummerreal} \or%
            \value{ohnezwei}=\value{teilaufgabennummerreal} \or%
            \value{ohnedrei}=\value{teilaufgabennummerreal}%
           }% Wenn Aufgabe auslassen
{}%^^A
{%^^A Sonst ...................................
%% Pr^^fcfen ob bei vorheriger Teilaufgabe keine L^^f6sung angegeben wurde
\keineloesung%
%% Z^^e4hler erst nach Pr^^fcfung erh^^f6hen:
\addtocounter{teilaufgabennummer}{1}%
\setcounter{teilaufgabenloesung}{0}%
\setcounter{loesungslinienanzahl}{0}%
  %^^A Vortext(#1)(1) oder (a),(b),...-Text(0) in Z^^e4hler abspeichern:
  \ifthenelse{\equal{t}{#1} \or \equal{ohnenummer}{#1} \or \equal{o}{#1}}%
     {\setcounter{vortext}{1}}%^^A Vortextmodus: keine Aufz^^e4hlung, ...
     {\setcounter{vortext}{0}}%^^A Teilaufgabenmodus
  %^^A Fachnummer (#2) (f^^fcr Punktzahlkasten) ermitteln
  %^^A F^^fcr Technologie: #2=t,T,1 > Fachnummer 1
  \ifthenelse{\equal{t}{#2} \or \equal{T}{#2} \or \equal{1}{#2}}%% Bedingung
     {\savebox{\fachtaufpzk}{\bf T} \setcounter{fachnummer}{1}}%
     {}%
  %^^A F^^fcr Arbeitsplanung: #2=AP,ap,Ap,A,2 > Fachnummer 2
  \ifthenelse{\equal{AP}{#2} \or \equal{ap}{#2} \or \equal{Ap}{#2} \or%
     \equal{a}{#2} \or \equal{A}{#2} \or \equal{2}{#2}}%% Bedingung
     {\sbox{\fachtaufpzk}{\bf A}\setcounter{fachnummer}{2}}%
     {}%
  %^^A F^^fcr Mathe: #2=m,M,3
  \ifthenelse{\equal{m}{#2} \or \equal{M}{#2} \or \equal{3}{#2}}%% Bedingung
     {\sbox{\fachtaufpzk}{\bf M}\setcounter{fachnummer}{3}%
     \setcounter{linierung}{1}% kariert
     }%
     {}%
  %^^A L^^f6sungslinienanzahl (#3) in Z^^e4hler abspeichern:
  \ifthenelse{#3<0}%^^A negative werte heben Punktzahlkasten an ???
     {\setlength{\anheben}{#3mm}\setcounter{loesungslinienanzahl}{0}}%
     {\setcounter{loesungslinienanzahl}{#3}}%
  %^^A Punkteanzahl(#4) in Z^^e4hler abspeichern
  \ifthenelse{\equal{#4}{}}%
     {\setcounter{punktetauf}{0}}%
     {\setcounter{punktetauf}{#4}}%
}%^^A Ende Sonst ...........................
\ifthenelse{\value{aufgabenstellung}=0 \or%
            \value{teilaufgabennummerreal}=\value{ohneeins} \or%
            \value{teilaufgabennummerreal}=\value{ohnezwei} \or%
            \value{teilaufgabennummerreal}=\value{ohnedrei}%
           }{\comment}{%
  \par% auf jeden Fall eine neue Zeile beginnen
  \smallskip%^^A Abstand zur vorheriger Teilaufgabe herstellen
  \begin{minipage}[t]{\aufgabenumbruchbreite}%
  %^^A BEGINN: Abfrage ob Vortext: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \ifthenelse{\value{vortext}=1}%
     {}%
     {%^^A False
     \begin{list}%
    {%^^A Beginn Def. der Standardmarke
    \ifthenelse{\value{teilaufnummerierung}=0}%
      {\alph{teilaufgabennummer}) }%^^A 1a,1b ...
      {{\textbf{\hspace{1.5mm}\theaufgabennummer.\arabic{teilaufgabennummer}} }}%1.1...
    }%^^A Ende Def. der Standardmarke
    { %^^A Beginn der Listenerkl^^e4rung
    \setlength{\leftmargin}{3ex}%^^A leicht einger^^fcckt
    \addtolength{\leftmargin}{0mm}%
    \setlength{\labelsep}{0.2ex}%^^A Abstand Text -- Marke => evtl. ^^e4ndern
    \setlength{\labelwidth}{3.6ex}%^^A Gro^^dfz^^fcgig gew^^e4hlt, so lassen
    \setlength{\itemindent}{0mm}%^^A kein Einr^^fccken in der ersten Zeile
    \setlength{\parskip}{0mm}%
    \ifthenelse{\value{lockerer}=0}{\setlength{\topsep}{0pt}}{%
    \setlength{\topsep}{\lockererwert}}%
    \setlength{\parsep}{0mm}%
    \setlength{\partopsep}{0mm}%
    \ifthenelse{\value{lockerer}=0}{\setlength{\itemsep}{0pt}}{%
    \setlength{\itemsep}{\lockererwert}}%
    }%^^A Ende der Listenerkl^^e4rung
    %%\rm%^^A Schriftart f^^fcr den Listentext
    \item%%==========Weg
    }%^^A Ende False
  %^^A ENDE: Abfrage ob Vortext: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
}%^^A Ende Formatierungsbefehle, nur gebraucht, wenn aufgabenstellung=1
}%^^A ENDE bei \begin ausgef^^fchrt %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
{%^^A BEGINN bei \end ausgef^^fchrt: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifthenelse{\value{aufgabenstellung}=0 \or%
            \value{teilaufgabennummerreal}=\value{ohneeins} \or%
            \value{teilaufgabennummerreal}=\value{ohnezwei} \or%
            \value{teilaufgabennummerreal}=\value{ohnedrei}%
           }{\endcomment}{%
%%%%%%%%%% ab hier
\ifthenelse{\value{teilaufgabennummerreal}=\value{ohneeins} \or%
            \value{teilaufgabennummerreal}=\value{ohnezwei} \or%
            \value{teilaufgabennummerreal}=\value{ohnedrei}%
           }% Wenn Aufgabe auslassen
{}%^^A Dann nichts machen
{%^^A Sonst ...................................
\par%
\ifthenelse{\value{loesungslinienanzahl}=1000}% = keine L^^f6sungslinie
     {%^^A Dann Platz schaffen Beginn
      \setcounter{punktetauf}{0}\setcounter{fachnummer}{0}%
      \vspace{3mm}%^^A auf 3mm lassen
     }%^^A Dann Platz schaffen Ende
     {%^^A Sonst Linien zeichnen Beginn
      \ifthenelse{\value{loesungslinienanzahl}=0}% 0 L^^f6sungslinien ?
         {% Dann Beginn (0 L^^f6sungslinien)
          \ifthenelse{\value{loesungslinienzeigen}=1}%
           {\pzk}% Dann nur Punktzahlkasten zeichnen
           {\hfill% Sonst kein Punktzahlkasten
            \begin{picture}(0,0)(-1,0)% Beginn Punktzahlkasten (-1.25,0)
            \end{picture}%
            \linebreak
           }%
         }% Dann Ende (0 L^^f6sungslinien)
         {% Sonst Beginn (1 oder mehr L^^f6sungslinien)
          \ifthenelse{\value{loesungslinienzeigen}=1}%
           {% Linien zeigen
            \ifthenelse{\value{linierung}=1}%
              {\lkamathe[\value{loesungslinienanzahl}]}%
              {\lka[\value{loesungslinienanzahl}]}%
           }% Linien zeigen
           {\smallskip}% sonst keine Linien zeigen
         }%^^A Sonst Ende (1 oder mehr L^^f6sungslinien)
     }%^^A Sonst Linien zeichnen Ende
%%%%%%%%%% Zeichnen der L^^f6sungslinien Ende
  %^^A %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %^^A Punktzahlen (fachspezifisch) aufaddieren
  %^^A Technologie
  \ifthenelse{\value{fachnummer}=1}%% Bedingung
    {\addtocounter{punktet}{\value{punktetauf}}}%% True
    {}%^^A False
  %^^A Arbeitsplanung
  \ifthenelse{\value{fachnummer}=2}%% Bedingung
    {\addtocounter{punkteap}{\value{punktetauf}}}%% True
    {}%^^A False
  %^^A Mathe
  \ifthenelse{\value{fachnummer}=3}%% Bedingung
    {\addtocounter{punktem}{\value{punktetauf}}}%% True
    {}%^^A False
  %^^A %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %^^A Alles wieder auf Ausgangswerte stellen
  \addtocounter{punktesumme}{\value{punktetauf}}%
  \setcounter{punktetauf}{0}%
  \setcounter{fachnummer}{0}%
    %^^A BEGINN: Abfrage ob Vortext: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \ifthenelse{\value{vortext}=1}%
     {}%
     {\end{list}}%
  %^^A ENDE: Abfrage ob Vortext: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \end{minipage}%
\par%
\ifthenelse{\value{dehnen}=0}{}{\vspace{2mm} \medskip}%
}%^^A Ende Formatierungsbefehle, nur gebraucht, wenn aufgabenstellung=1
\setcounter{teilaufgabenloesung}{0}
}%^^A Ende Sonst ...........................
}%^^A ENDE bei \end ausgef^^fchrt

\newcommand{\punkte}[4][]{%
\ifthenelse{\value{ohneeins}=\value{teilaufgabennummerreal} \or%
            \value{ohnezwei}=\value{teilaufgabennummerreal} \or%
            \value{ohnedrei}=\value{teilaufgabennummerreal}%
           }% Wenn teilaufgabe ausgeblendet wird
{}% Dann nichts machen (bei Ausblenden)
{%^^A Sonst (Teilaufgabe nicht ausgeblendet) BEGINN
     %^^A Nummerierung erzeugen:
     \teilaufgabennummererzeugen%
     %^^A L^^f6sung(#2), Punkte(#3) und Kommentar(#4) angeben
     #2 %
     % Achtung: verschachteltes ifthenelse
     \ifthenelse{\equal{1/2}{#3}}%
                {\ovalbox{\raisebox{0.75mm}{$\scriptscriptstyle \frac{1}{2}$}}}%
                {\ifthenelse{\equal{1/3}{#3}}%
                   {\ovalbox{\raisebox{0.75mm}{$\scriptscriptstyle \frac{1}{3}$}}}%
                   {\ovalbox{#3}}%
                }%
     \ifthenelse{\equal{}{#4}}{}{ (#4)}%
  %^^A L^^f6sungsbefehl wurde einmal ausgef^^fchrt, also Z^^e4hler setzen
  \setcounter{teilaufgabenloesung}{1}%
}%^^A Sonst (Teilaufgabe nicht ausgeblendet) ENDE
}%^^A

\newenvironment{loesung}%
{%^^A BEGINN bei \begin ausgef^^fchrt
\ifthenelse{\value{loesungen}=0}
   {\comment}
   {%
    %\begin{minipage}[t]{\aufgabenumbruchbreite}% Minipage der L^^f6sung
      %^^A L^^f6sungstitel bei ***AUFGABE UND L^^d6SUNG***, BEGINN
      \ifthenelse{\value{aufgabenstellung}=1 \and% Wenn Aufgabenstellung und
         \value{loesungen}=1 \and% L^^f6sungen ausgegeben werden
         \value{teilaufgabenloesung}=0% sowie \loesung das erstemal
         }%
         {% Dann, Beginn
         \vspace{-2ex}% L^^f6sung n^^e4her an Aufgabe heranbringen (nur 1.mal)
         \ifthenelse{\value{loesungslinienanzahl}=0}%^^A Wenn ohne L^^f6sungslinienen
            {%^^A Dann Abgrenzungslinie Aufgabe-L^^f6sung zeichnen
            \vspace{2.5mm}% zus^^e4tzlicher Abstand
            \begin{picture}(0,0)% unbemerkbares Bild, Abgrenzungslinie
               \thicklines                 %% Breie Linien
               \put(0,5){\line(1,0){177}}  %% Linie Zeichnen
            \end{picture}%
            }%^^A Ende Dann
            {}% Sonst: nix
            \textbf{\textcolor{gruen}{L^^f6sung: }}% L^^f6sung in gr^^fcn (nur 1.mal)
         }% Dann, Ende
         {}% Sonst
      %^^A L^^f6sungsbefehl wurde ausgef^^fchrt innerhalb Aufgabe=ja
      \setcounter{ersteloesunginaufgabe}{1}%
      %^^A L^^f6sungstitel bei ***AUFGABE UND L^^d6SUNG***, ENDE
    %^^A Innere Minipage beginnen
      \ifthenelse{\value{aufgabenstellung}=1}%
         {\begin{minipage}[t]{\aufgabenumbruchbreite-17.5mm}}%
         {}%
   }%
}%^^A ENDE bei \begin ausgef^^fchrt
{%^^A BEGINN bei \end ausgef^^fchrt
\ifthenelse{\value{loesungen}=0}
   {\endcomment}
   {%
    %^^A Innere Minipage beenden
    \ifthenelse{\value{aufgabenstellung}=1}
       {\end{minipage}}
       {}
    %\end{minipage}
    \par
   \setcounter{ersteloesunginaufgabe}{1}%
   }
}%^^A ENDE bei \end ausgef^^fchrt

\newcommandtwoopt{\ohne}[3][0][0]{% 2 optionale Parameter
\setcounter{ohneeins}{#1}%
\setcounter{ohnezwei}{#2}%
\setcounter{ohnedrei}{#3}%
}%

\newcounter{ab}            \setcounter{ab}{0}
\newcounter{a}             \setcounter{a}{0}
\newcounter{b}             \setcounter{b}{0}
\newcounter{c}             \setcounter{c}{0}
\newcounter{projekt}       \setcounter{projekt}{0}
\newcounter{projektbezug}          %^^A Aufgabenformulierung
\setcounter{projektbezug}{0}       %^^A nicht projektbezogen formuliert
\newcounter{projektbezugtmp}       %^^A Zum temp. speichern von projektbezug
\newcommand{\projektbezug}{\setcounter{projektbezug}{1}}
\newcommand{\projekt}[2]{%^^A Beginn Definition
\setcounter{projekt}{1}
\ifthenelse{\value{projektbezug}=1}%^^A Wenn
  {%^^A Beginn Dann
     \ifthenelse{\value{gruppeninfo}=0}{#1}{}%
     \ifthenelse{\value{gruppeninfo}=1}{\textcolor{dunkelgrau}{#1}}{}%
     \ifthenelse{\value{gruppeninfo}=2}{\textcolor{blau}{#1}}{}%
  }%^^A Ende Dann
  {%^^A Beginn sonst
     \ifthenelse{\value{gruppeninfo}=0}{#2}{}%
     \ifthenelse{\value{gruppeninfo}=1}{\textcolor{dunkelgrau}{#2}}{}%
     \ifthenelse{\value{gruppeninfo}=2}{\textcolor{gruen}{#2}}{}%
  }%^^A Ende Sonst
}%^^A Ende Definition
\newcounter{gruppe}               \setcounter{gruppe}{3}
\newcounter{gruppeglobal}         \setcounter{gruppeglobal}{3}
\newcounter{gruppetmp}
\newcommand{\gruppea}{
\setcounter{gruppe}{1} %^^A Von \nehmealle ver^^e4ndert
\setcounter{gruppeglobal}{1} %^^A NUR von \gruppea\gruppeb\gruppec ver^^e4ndert
}%^^A 1=a
\newcommand{\gruppeb}{
\setcounter{gruppe}{2}
\setcounter{gruppeglobal}{2}
}%^^A 2=b
\newcommand{\gruppec}{
\setcounter{gruppe}{3}
\setcounter{gruppeglobal}{3}
}%^^A 3=c
\newcommand{\abc}[3]{%^^A Definition Beginn
\setcounter{a}{1}%^^A Es gibt a
\setcounter{b}{1}%^^A Es gibt b
\ifthenelse{\value{ab}=1}{\setcounter{c}{0}}{\setcounter{c}{1}}%
\ifthenelse{\value{gruppe}=3}%^^A Wenn
{%^^A Beginn Dann C
   \ifthenelse{\value{gruppeninfo}=0}{#3}{}%
   \ifthenelse{\value{gruppeninfo}=1}{\textcolor{hellgrau}{#3}}{}%
   \ifthenelse{\value{gruppeninfo}=2}{\textcolor{rot}{#3}}{}%
}{}%^^A Ende Dann C, Sonst
\ifthenelse{\value{gruppe}=2}% Wenn
{%^^A Beginn Dann B
   \ifthenelse{\value{gruppeninfo}=0}{#2}{}%
   \ifthenelse{\value{gruppeninfo}=1}{\textcolor{hellgrau}{#2}}{}%
   \ifthenelse{\value{gruppeninfo}=2}{\textcolor{lila}{#2}}{}%
}{}%^^A Ende Dann B, Sonst
\ifthenelse{\value{gruppe}=1}% Wenn
{%^^A Beginn Dann A
   \ifthenelse{\value{gruppeninfo}=0}{#1}{}%
   \ifthenelse{\value{gruppeninfo}=1}{\textcolor{hellgrau}{#1}}{}%
   \ifthenelse{\value{gruppeninfo}=2}{\textcolor{rosa}{#1}}{}%
}{}%^^A Ende Dann A, Sonst
}%^^A Definition Ende

\newcommand{\ab}[2]{%^^A Definition Beginn
\setcounter{ab}{1}%^^A Zeigt an, dass nur der \ab-Befehl aufgerufen wurde
\abc{#1}{#2}{}%^^A baut auf \abc auf
}%^^A Definition Ende

\newenvironment{aufgabe}[2][]{%% Begin \begin
\setcounter{ersteloesunginaufgabe}{0}%
\setcounter{teilaufgabenloesung}{1}%^^A Verhindert, dass in der ersten
\setcounter{textblocknummerreal}{0}
\setcounter{teilaufgabennummer}{0}%^^A Z^^e4hlererh^^f6hung in teilaufgabe-Umgebung
\setcounter{teilaufgabennummerreal}{0}%^^A
\setcounter{a}{0}\setcounter{b}{0}\setcounter{c}{0}\setcounter{projekt}{0}%
\ifthenelse{\value{loesungen}=1 \and%
   \value{aufgabenstellung}=0%
   }%
   {\vspace{3.5mm}
    \begin{minipage}[t]{\aufgabentitelbreite}
    \begin{picture}(0,0)% unbemerkbares Bild mit Abgrenzungslinie zur Voraufgabe
       \thicklines                 %% Breie Linien
       \put(0,5){\line(1,0){175}}  %% Linie Zeichnen
    \end{picture}%
    \textbf{\usebox{\aufgabenmarke} \arabic{aufgabennummer}\,: #2}
    \hfill \usebox{\dateiname}.tex \hfill
    %% Gruppeninfo angeben
    \ifthenelse{\value{projektbezug}=0}{\keinprojekt}{}%
    \ifthenelse{\value{projektbezug}=1}{Projekt}{}%
    \ifthenelse{\value{gruppeglobal}=1}{ --- A}{}%
    \ifthenelse{\value{gruppeglobal}=2}{ --- B}{}%
    \ifthenelse{\value{gruppeglobal}=3}{ --- C}{}%
    \end{minipage}
    \par
    \vspace{1.5mm}
   }
   {}%
\ifthenelse{\value{aufgabenkopfzeile}=1}%
 {%^^A  Aufgabenkopfzeile zeigen Beginn
   \par
   %^^A Abstand Voriges Aufgabenende - Aufgabentitelbalken >
   \ifthenelse{\value{dehnen}=0}{\vspace{5mm}}{\vspace{5mm} \bigskip}%
   %^^A Aufgabentitelbalken erzeugen: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
   \begin{minipage}[t]{\aufgabentitelbreite}  %^^A Beginn Aufgabentitelbalken
     \textbf{\usebox{\aufgabenmarke} \arabic{aufgabennummer}\,: }%
     %^^A Aufgabentitel schreiben >
     \ifthenelse{\value{aufgabentitel}=0}{}{\textbf{#2}}\hfill%
     %^^A Dateinamen schreiben >
     \ifthenelse{\value{dateinamen}=0}{}{\usebox{\dateiname}\hfill}%
     %^^A Fachangabe der gesamten Aufgabe schreiben >
     \ifthenelse{\value{fachangabe}=0}{}{#1\hfill}%
     %^^A Angaben zur Gruppe schreiben >
     \ifthenelse{\value{gruppeninfo}=0}{}%
     {%
     \ifthenelse{\value{projektbezug}=0}{\keinprojekt}{}%
     \ifthenelse{\value{projektbezug}=1}{Projekt}{}%
     \ifthenelse{\value{gruppeglobal}=1}{ --- A}{}%
     \ifthenelse{\value{gruppeglobal}=2}{ --- B}{}%
     \ifthenelse{\value{gruppeglobal}=3}{ --- C}{}%
     }%
   \end{minipage} %^^A Ende Aufgabentitelbalken %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
     \par
     \nopagebreak %^^A Seitenumbruch nach Aufgabentitel versuchen zu verhindern:
     \par
     %^^A \ifthenelse{\value{lockerer}=0}{}{   %^^A Variabler ?????
     %^^A   \vspace{\lockererwert}}%           %^^A Zusatzabstand ?????
    %^^A Abstand Aufgabentitelbalken - Aufgabenbeginn >
    \ifthenelse{\value{dehnen}=0}{\vspace{2mm}}{\vspace{2mm} \medskip}%
 }%^^A Aufgabenkopfzeile zeigen Ende
 {}%sonst keine Aufgabenkopfzeile
}%^^A Ende \begin{aufgabe}
{%^^A Beginn \end{aufgabe}
%% Pr^^fcfen ob bei vorheriger Teilaufgabe keine L^^f6sung angegeben wurde
\keineloesung%
\ifthenelse{\value{aufgabenfusszeile}=0}
           {}%^^A
{%^^A  Aufgabenfusszeile zeigen Beginn
  \par
  %^^A Abstand um Aufgabenfusszeile nahe an die Aufgabe heranzur^^fccken:
  \vspace{-4.5mm} %^^A
  %^^A Abstand um Platz f^^fcr L^^f6sung zu schaffen:
  \ifthenelse{\value{loesungen}=1}%^^A wenn L^^f6sungen angegeben wurden
  {\vspace{5.5mm}}%^^A Platz schaffen
  {}%^^A Sonst nix
  \ifthenelse{\value{punktesummezeigen}=1}{% Beginn Punktesumme zeigen >
  \par
  \nopagebreak %^^A Verhindert (hoffe), dass Seite vor Fussbalken umbrochen wird
  \par
  %^^A %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %^^A Aufgabenfussbalken erzeugen: %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{minipage}[t]{\aufgabentitelbreite}%^^A  Beginn des Aufgabenfussbalkens
      %^^A Gruppeninformationen schreiben >
  \ifthenelse{\value{gruppeninfo}=0}{}%
     {%^^A Beginn Gruppeninfo >
      %^^A Kasten f^^fcr A >
     \ifthenelse{\value{a}=1 \and \value{gruppe}=1}%
        {\ifthenelse{\value{gruppeninfo}=1}{\abcbox{\textbf{\underline{A}}}}{}%
         \ifthenelse{\value{gruppeninfo}=2}%
           {\textcolor{rosa}{\abcbox{\textbf{\underline{A}}}}}{}%
        \hspace{1mm}}{}%
     \ifthenelse{\value{a}=1 \and \not \value{gruppe}=1}%
        {\abcbox{A} \hspace{1mm}}{}
     \ifthenelse{\value{a}=0}%
        {\abcbox{---} \hspace{1mm}}{}%
      %^^A Kasten f^^fcr B >
     \ifthenelse{\value{b}=1 \and \value{gruppe}=2}%
        {\ifthenelse{\value{gruppeninfo}=1}{\abcbox{\textbf{\underline{B}}}}{}%
         \ifthenelse{\value{gruppeninfo}=2}%
           {\textcolor{lila}{\abcbox{\textbf{\underline{B}}}}}{}%
        \hspace{1mm}}{}%
     \ifthenelse{\value{b}=1 \and \not \value{gruppe}=2}%
        {\abcbox{B} \hspace{1mm}}{}
     \ifthenelse{\value{b}=0}%
        {\abcbox{---} \hspace{1mm}}{}%
      %^^A Kasten f^^fcr C >
     \ifthenelse{\value{c}=1 \and \value{gruppe}=3}%
        {\ifthenelse{\value{gruppeninfo}=1}{\abcbox{\textbf{\underline{C}}}}{}%
         \ifthenelse{\value{gruppeninfo}=2}%
           {\textcolor{rot}{\abcbox{\textbf{\underline{C}}}}}{}%
        \hspace{1mm}}{}%
     \ifthenelse{\value{c}=1 \and \not \value{gruppe}=3}%
        {\abcbox{C} \hspace{1mm}}{}
     \ifthenelse{\value{c}=0 \and \( \value{a}=1 \or \value{b}=1 \)}%
        {\abcbox{---} \hspace{1mm}}{}%
     \ifthenelse{\value{a}=0 \and \value{b}=0 \and \value{c}=0}% weder a,b,c
        {\abcbox{\textbf{\underline{C}}} \hspace{1mm}}{}%
     }%^^A Ende Gruppeninfo <
  \hfill
  %^^A Projektinformationen schreiben >
  \ifthenelse{\value{gruppeninfo}=0}{}%
     {%^^A Beginn Gruppeninfo-Projekt >
     %^^A Kasten f^^fcr Projekt >
     \ifthenelse{\value{projekt}=1 \and \value{projektbezug}=1}%
        {\ifthenelse{\value{gruppeninfo}=1}%
           {\textcolor{dunkelgrau}{\projektbox{Projekt}}}{}%
         \ifthenelse{\value{gruppeninfo}=2}%
           {\textcolor{gruen}{\projektbox{Projekt}}}{}%
        \hspace{1mm}}{}%
  %^^A %\textcolor{blau}{\projektbox{Projekt}} \hspace{1mm}}{}%
     \ifthenelse{\value{projekt}=1 \and \value{projektbezug}=0}%
        {\ifthenelse{\value{gruppeninfo}=1}%
           {\textcolor{dunkelgrau}{\projektbox{\keinprojekt}}}{}%
         \ifthenelse{\value{gruppeninfo}=2}%
           {\textcolor{gruen}{\projektbox{\keinprojekt}}}{}%
        \hspace{1mm}}{}%
     }%^^A Ende Gruppeninfo-Projekt <
  \hfill
     %^^A Angaben zur Gesamtpunktzahl schreiben >
   \ifthenelse{\value{punktzahlkasten}=0}{}%
     {%
     \fbox{\fusszeilenstuetze \textbf{\usebox{\aufgabenmarke} % Leerzeichen wichtig
        \arabic{aufgabennummer}\,: %
        \thepunktesumme{} Punkte}}
     }%
  \end{minipage}%^^A Ende Aufgabenfussbalken
  \par
  %^^A %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  }%^^A Ende Punktesumme zeigen
  {}%^^A sonst nix
  \vspace{3mm}
}%^^A Aufgabenfusszeile zeigen Ende
\ifthenelse{\value{aufgabenstellung}=0 \and% Wenn Aufgabenstellung und
            \value{loesungen}=1% L^^f6sungen ausgegeben werden
           }%
   {% Dann, Beginn
   %\end{minipage} End Minipage
   }%
   {}%
\setcounter{punktesumme}{0}%
\addtocounter{aufgabennummer}{1}%^^A Aufgabennummer  der KA erhoehen
\setcounter{ohneeins}{0}%^^A Keine Aufgabe soll ausgeblendet werden
\setcounter{ohnezwei}{0}%^^A Keine Aufgabe soll ausgeblendet werden
\setcounter{ohnedrei}{0}%^^A Keine Aufgabe soll ausgeblendet werden
}

\newcommand{\nehmehilfe}[2][]{%^^A Synchronisiert mit \nehme[]
\par \sbox{\dateiname}{#2} \input{#2} \par}
\newcommand{\nehme}[2][]{%^^A Synchronisiert mit \nehmehilfe
\ifthenelse{\equal{}{#1}}% \nehme[]
   {%
   \par \sbox{\dateiname}{#2} \input{#2} \par%
   }{}%
\ifthenelse{\equal{quellcode}{#1}}% \nehme[quellcode]
   {%
   \par \verbatimtabinput{#2} \par%
   }{}%
\ifthenelse{\equal{beispiel}{#1}}% \nehme[beispiel]
   {%
   {\Large \bf Die Aufgabe \ldots}
   \par \sbox{\dateiname}{#2} \input{#2} \par%
   \vspace{5mm} \par {\Large \bf \ldots{} wurde erzeugt durch den Quellcode \ldots}
   \par \verbatimtabinput{#2} \par%
   {\Large \bf \ldots{} der in der Datei \texttt{#2.tex} abgespeichert wurde.}
   }{}%
}

\newcommand{\nehmealle}[2][]{%
\setcounter{projektbezugtmp}{\value{projektbezug}}
\setcounter{gruppe}{1}
\nehmehilfe{#2} %^^A A, pr^^fcft dabei, ob \ab oder \abc verwendet wird
\ifthenelse{\value{a}=1 \and \value{b}=1 \and \value{c}=0}%% nur AB-Gruppen >
  {\setcounter{gruppe}{2} \nehmehilfe{#2}}{} %^^A dann B nachschieben
\ifthenelse{\value{a}=1 \and \value{b}=1 \and \value{c}=1}%% Es gibt ABC-Gr. >
  {\setcounter{gruppe}{2}  \nehmehilfe{#2} \setcounter{gruppe}{3}
   \nehmehilfe{#2}}{}%^^A dann A,B nachschieben
\setcounter{gruppe}{\value{gruppeglobal}}%^^A globale Gruppe wiederherstellen
\setcounter{projektbezug}{\value{projektbezugtmp}}
}

\newcommand{\allealle}{%^^A Beginn
\setcounter{gruppe}{1}
\renewcommand{\nehme}[2][]{\nehmealle[##1]{##2}}
}%^^A Ende


\newcommand{\klassenarbeit}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{0}
\setcounter{aufgabenstellung}{1}
\setcounter{loesungen}{0}
\setcounter{dateinamen}{0}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{0}
\setcounter{fachangabepzk}{0}
\setcounter{punkteangabepzk}{1}
\setcounter{punktzahlkasten}{1}
\setcounter{punktesummezeigen}{0}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{0}
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\loesungka}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{0}
\setcounter{aufgabenstellung}{0}
\setcounter{loesungen}{1}
\setcounter{dateinamen}{0}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{0}
\setcounter{fachangabepzk}{0}
\setcounter{punkteangabepzk}{0}
\setcounter{punktzahlkasten}{0}
\setcounter{punktesummezeigen}{0}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{2} %^^A Wieso eigentlich 2 ???
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\aufgabensammlung}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{1}
\setcounter{aufgabenstellung}{1}
\setcounter{loesungen}{0}
\setcounter{dateinamen}{1}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{1}
\setcounter{fachangabepzk}{1}
\setcounter{punkteangabepzk}{1}
\setcounter{punktzahlkasten}{1}
\setcounter{punktesummezeigen}{1}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{2} %^^A Wieso eigentlich 2 ???
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\loesungas}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{0}
\setcounter{aufgabenstellung}{0}
\setcounter{loesungen}{1}
\setcounter{dateinamen}{0}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{0}
\setcounter{fachangabepzk}{0}
\setcounter{punkteangabepzk}{0}
\setcounter{punktzahlkasten}{0}
\setcounter{punktesummezeigen}{0}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{0}
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\schueleras}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{0}
\setcounter{aufgabenstellung}{1}
\setcounter{loesungen}{0}
\setcounter{dateinamen}{0}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{0}
\setcounter{fachangabepzk}{0}
\setcounter{punkteangabepzk}{0}
\setcounter{punktzahlkasten}{0}
\setcounter{punktesummezeigen}{1}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{0}
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\projektpruefung}{%
\setcounter{teilaufnummerierung}{0}
\setcounter{aufgabenpunkte}{0}
\setcounter{aufgabenstellung}{1}
\setcounter{loesungen}{0}
\setcounter{dateinamen}{0}
\setcounter{dehnen}{0}
\setcounter{fachangabe}{0}
\setcounter{fachangabepzk}{0}
\setcounter{punkteangabepzk}{0}
\setcounter{punktzahlkasten}{0}
\setcounter{punktesummezeigen}{1}
\setcounter{aufgabentitel}{1}
\setcounter{gruppeninfo}{0}
\setlength{\lkaabstand}{3mm}
\setlength{\zusatzlkaabstand}{1mm}
\setlength{\loesungslinienbreite}{0.35mm}
\setcounter{debuggen}{0}
}%

\newcommand{\debug}{%
\setcounter{fachangabe}{1}           %^^A Fach der Aufgabe zeigen=(1), aus=(0)
\setcounter{debuggen}{1}             %^^A Schaltet Hilfen zur Aufgaben-
                                     %^^A erstellung ein=(1), aus=(0)
\setcounter{dehnen}{0}               %^^A Dehnzwischenraeume
                                     %^^A ein=(1),  aus=(0)
}%


















\endinput
%%
%% End of file `kapack.sty'.
